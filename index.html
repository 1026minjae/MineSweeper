<!DOCTYPE html5>

<html>

<head>
<meta charset="utf-8" />
<title>Minesweeper</title>

<style>
td {
    width: 30px;
    height: 30px;
    margin: 1px 1px 1px 1px;
    padding: 0 0 0 0;
    border: black 1px solid;
    font-weight: bold;
    font-size: 16px;
    text-alignment: center;
}

td.unchecked {
    background-color: grey;
}

td.checked {
    background-color: lightgrey;
}

td.mine {
    background-color: red;
}
</style>

<script>
const GAMEBOARDSIZE_MIN = 9;
const GAMEBOARDSIZE_MAX = 25;
const MARK_WALL = 10;
const MARK_MINE = 11;

window.onload = () => {
    initGameBoardData ();
    initGameBoardUI ();
};

function initGameBoardData () {
    gameBoardData = new Array(GAMEBOARDSIZE_MAX + 2);

    gameBoardData[0] = Array.from ({length: GAMEBOARDSIZE_MAX + 2}, () => MARK_WALL);

    for (let i = 1; i <= GAMEBOARDSIZE_MAX; ++i) {
        gameBoardData[i] = Array.from ({length: GAMEBOARDSIZE_MAX + 2}, () => 0);
        gameBoardData[i][0] = MARK_WALL;
        gameBoardData[i][GAMEBOARDSIZE_MAX + 1] = MARK_WALL;
    }

    gameBoardData[GAMEBOARDSIZE_MAX + 1] = Array.from ({length: GAMEBOARDSIZE_MAX + 2}, () => MARK_WALL);
}

function initGameBoardUI () {
    
    gameBoardWidthSelector = document.querySelector("#gameBoardWidthSelector");
    gameBoardHeightSelector = document.querySelector("#gameBoardHeightSelector");
    gameBoardLevelSelector = document.querySelector("#gameBoardLevelSelector");
    gameBoardWidthSelector.addEventListener("change", newGame);
    gameBoardHeightSelector.addEventListener("change", newGame);
    gameBoardLevelSelector.addEventListener("change", newGame);
}

function gameBoardValueChanged (e) {
    newGame ();
}

function newGame () {
    gameBoardWidth = document.querySelector("#gameBoardWidthSelector").value;
    gameBoardHeight = document.querySelector("#gameBoardHeightSelector").value;
    gameBoardLevel = document.querySelector("#gameBoardLevelSelector").value;

    resetGameBoardUI(gameBoardWidth, gameBoardHeight);

    document.querySelector("#gameBoardWidthDisplay").innerHTML = gameBoardWidth.toString();
    document.querySelector("#gameBoardHeightDisplay").innerHTML = gameBoardHeight.toString();
    document.querySelector("#gameBoardLevelDisplay").innerHTML = gameBoardLevel.toString();
}

function resetGameBoardUI (gameBoardWidth, gameBoardHeight) {
    gameBoardUI = document.querySelector("#gameBoardUI");

    gameBoardUI.innerHTML = "";

    for (let h = 1; h <= gameBoardHeight; ++h) {
        newRow = document.createElement("tr");
        for (let w = 1; w <= gameBoardWidth; ++w) {
            newCell = document.createElement("td");
            newCellID = "c" + w.toString() + "_" + h.toString();
            newCell.setAttribute("id", newCellID);
            newCell.setAttribute("class", "unchecked");
            newRow.appendChild(newCell);
         }
        gameBoardUI.appendChild(newRow);
     }
}

function gameBoardCellClicked (e) {

}

</script>
</head>

<body>
<font class="menuText">게임보드 가로: <span id="gameBoardWidthDisplay">17</span>칸</font>
<input id="gameBoardWidthSelector" type="range" min="9" max="25" step="1" />
<font class="menuText">게임보드 세로: <span id="gameBoardHeightDisplay">17</span>칸</font>
<input id="gameBoardHeightSelector" type="range" min="9" max="25" step="1" />
<font class="menuText">레벨: <span id="gameBoardLevelDisplay">6</span></font>
<input id="gameBoardLevelSelector" type="range" min="1" max="10" step="1" />
<table id="gameBoardUI"></table>
</body>

</html>
